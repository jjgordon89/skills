---
description: 检查和管理药物相互作用
arguments:
  - name: action
    description: 操作类型：check(检查)/list(列出规则)/add(添加规则)/update(更新规则)/delete(删除规则)/history(查看历史)
    required: true
  - name: drugs
    description: 药物名称或食物名称（用于检查特定药物的相互作用，可选）
    required: false
---

# 药物相互作用检查

检测和管理药物相互作用，包括药物-药物、药物-疾病、药物剂量、药物-食物四种类型的相互作用，提供五级严重程度分级（A/B/C/D/X）的专业建议。

## 操作类型

### 1. 检查相互作用 - `check`

检查当前用药方案中存在的相互作用。

**参数说明：**
- `drugs` (可选): 指定要检查的药物，格式：`药物1 药物2`，不指定则检查所有当前用药

**示例：**
```
/interaction check
/interaction check 华法林 阿司匹林
/interaction check 辛伐他汀 氨氯地平
```

**检查内容：**
- 🔄 药物-药物相互作用
- 🏥 药物-疾病冲突
- 💊 药物剂量冲突
- 🍽️ 药物-食物相互作用

### 2. 列出相互作用规则 - `list`

查看相互作用规则库。

**参数说明：**
- 无参数：列出所有规则统计
- 级别筛选：`A`/`B`/`C`/`D`/`X`（列出特定级别的规则）
- 药物名称：列出特定药物相关的规则

**示例：**
```
/interaction list
/interaction list X
/interaction list 华法林
```

### 3. 添加相互作用规则 - `add`

添加自定义相互作用规则。

**参数说明：**
- 规则信息（必填），格式：`药物1 药物2 级别(A/B/C/D/X) 风险描述`

**示例：**
```
/interaction add 阿司匹林 华法林 X 显著增加出血风险
/interaction add 二甲双胍 酒精 C 增加乳酸酸中毒风险
```

### 4. 更新相互作用规则 - `update`

更新已有的相互作用规则。

**参数说明：**
- 规则信息（必填），格式：`药物1 药物2 [字段] [值]`

**示例：**
```
/interaction update 阿司匹林 华法林 severity B
/interaction update 华法林 维生素K recommendations 保持摄入量稳定
```

### 5. 删除相互作用规则 - `delete`

删除自定义的相互作用规则。

**参数说明：**
- 药物名称（必填），格式：`药物1 药物2`

**示例：**
```
/interaction delete 阿司匹林 华法林
```

### 6. 查看检查历史 - `history`

查看过去的相互作用检查记录。

**示例：**
```
/interaction history
/interaction history 2025-12
```

## 执行步骤

### 检查相互作用 (check)

#### 1. 加载当前用药列表

从 `data/medications/medications.json` 读取所有活跃药物（`active: true`）。

如果没有用药记录，输出提示：
```
💡 提示
暂无用药记录，请先使用 /medication add 添加药物
```

#### 2. 执行四种检测逻辑

##### 2.1 药物-药物相互作用检测

**检测算法：**

```javascript
// 遍历所有药物组合
for (let i = 0; i < medications.length; i++) {
  for (let j = i + 1; j < medications.length; j++) {
    const drug1 = medications[i];
    const drug2 = medications[j];

    // 检查直接匹配（药物名称）
    const directMatch = findInteraction(drug1.name, drug2.name);
    if (directMatch) {
      interactions.push({
        type: 'drug_drug',
        drugs: [drug1, drug2],
        rule: directMatch
      });
    }

    // 检查类别匹配
    const categoryMatch = findCategoryInteraction(drug1, drug2);
    if (categoryMatch) {
      interactions.push({
        type: 'category',
        drugs: [drug1, drug2],
        rule: categoryMatch
      });
    }
  }
}
```

**匹配规则优先级：**
1. 直接名称匹配（药物通用名或商品名完全相同）
2. 同义词匹配（考虑药物的别称）
3. 类别匹配（同类药物，如多种NSAIDs）
4. 机制匹配（通过相同代谢酶的药物）

##### 2.2 药物-疾病冲突检测

**数据来源：**
- `data/profile.json` - 用户档案中的疾病史
- 出院小结记录中的诊断
- 症状记录中的慢性病信息

**检测逻辑：**
```javascript
for (const medication of medications) {
  for (const disease of userDiseases) {
    const conflict = findDrugDiseaseConflict(medication.name, disease.name);
    if (conflict) {
      conflicts.push({
        type: 'drug_disease',
        medication: medication,
        disease: disease,
        rule: conflict
      });
    }
  }
}
```

##### 2.3 药物剂量冲突检测

**检查项目：**
1. 日剂量是否超过最大剂量
2. 是否接近警告阈值
3. 年龄相关剂量调整（如老年人需减量）
4. 肾功能调整（如肌酐清除率低时需减量）

**检测逻辑：**
```javascript
for (const medication of medications) {
  const dosageRule = findDosageLimit(medication.name);
  if (!dosageRule) continue;

  // 计算当前日剂量
  const currentDose = calculateDailyDose(medication);

  // 检查是否超过最大剂量
  if (currentDose > dosageRule.max_daily_dose.value) {
    conflicts.push({
      type: 'exceeds_max_dose',
      medication: medication,
      current: currentDose,
      limit: dosageRule.max_daily_dose
    });
  }

  // 检查年龄相关调整
  if (userAge >= 65 && dosageRule.adjustments?.elderly) {
    if (currentDose > dosageRule.adjustments.elderly.max_dose) {
      conflicts.push({
        type: 'age_specific_exceeds',
        medication: medication,
        age_group: '老年人(>65岁)',
        current: currentDose,
        limit: dosageRule.adjustments.elderly.max_dose
      });
    }
  }
}
```

##### 2.4 药物-食物相互作用检测

**数据来源：**
- 从 `diet` 命令获取近期饮食记录（近7天）

**检测逻辑：**
```javascript
// 获取近期饮食记录
const recentFoods = getRecentDietRecords(days: 7);

for (const medication of medications) {
  // 查找该药物的已知食物相互作用
  const foodInteractions = findFoodInteractions(medication.name);

  for (const interaction of foodInteractions) {
    // 检查用户是否食用了相关食物
    const consumed = checkFoodConsumption(recentFoods, interaction.food.examples);

    if (consumed && consumed.frequency >= 'moderate') {
      interactions.push({
        type: 'drug_food',
        medication: medication,
        food: interaction.food,
        consumed: consumed,
        rule: interaction
      });
    }
  }
}
```

#### 3. 汇总和排序结果

将所有检测到的相互作用按严重程度排序：
- 🆘 X类（绝对禁忌）- 优先显示
- 🔴 D类（禁忌）
- 🟠 C类（相对禁忌）
- 🟡 B类（谨慎使用）
- 🟢 A类（安全）- 通常不显示

#### 4. 输出检查报告

**输出格式：**

无相互作用时：
```
✅ 药物相互作用检查

检查时间：2025年12月31日 12:34
━━━━━━━━━━━━━━━━━━━━━━━━━━

当前用药（3种）：
• 阿司匹林 100mg (每天1次)
• 氨氯地平 5mg (每天1次)
• 二甲双胍 500mg (每天3次)

检查结果：
━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 未检测到药物相互作用
✅ 未检测到药物-疾病冲突
✅ 未检测到剂量问题
✅ 未检测到饮食冲突

━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 您的用药方案安全性良好，请继续遵医嘱用药
📅 建议每月进行一次相互作用检查

本次检查结果已保存
```

存在严重相互作用时：
```
🚨 药物相互作用检查

检查时间：2025年12月31日 12:34
━━━━━━━━━━━━━━━━━━━━━━━━━━

当前用药（4种）：
• 华法林 5mg (每天1次)
• 阿司匹林 100mg (每天1次)
• 氨氯地平 5mg (每天1次)
• 辛伐他汀 20mg (每晚1次)

检测到 3 个相互作用：
━━━━━━━━━━━━━━━━━━━━━━━━━━

🆘 绝对禁忌（1个）
━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 华法林 + 阿司匹林
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   严重程度：🆘 绝对禁忌 (X类)
   风险等级：5/5

   问题描述：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   阿司匹林可增强华法林的抗凝作用，显著增加出血风险。
   可能导致严重出血，包括颅内出血、消化道出血等。

   作用机制：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   阿司匹林抑制血小板功能，与华法林的抗凝作用产生协同效应

   临床影响：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   • 出血风险增加 3-5 倍
   • 严重出血发生率：约 2-5%/年
   • 颅内出血风险增加 50%

   管理建议：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   🚫 建议避免合用，除非：
      - 有明确的心血管适应症（如房颤+冠心病）
      - 在专科医生指导下使用
      - 定期监测凝血功能

   ⚠️ 如必须合用：
      • 密切监测 INR 值（目标值 2.0-3.0）
      • 观察出血迹象：瘀斑、牙龈出血、鼻出血、黑便
      • 避免受伤和剧烈运动
      • 定期复查血常规

   👁️ 需要立即就医的情况：
      • 严重头痛
      • 呕血或黑便
      • 严重皮下瘀斑
      • 血尿

   数据来源：FDA药品说明书
   ━━━━━━━━━━━━━━━━━━━━━━━━━━

🔴 禁忌（1个）
━━━━━━━━━━━━━━━━━━━━━━━━━━

2. 辛伐他汀 + 氨氯地平
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   严重程度：🔴 禁忌 (D类)
   风险等级：4/5

   问题描述：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   氨氯地平可能抑制辛伐他汀的代谢，增加血药浓度，
   从而增加肌肉毒性风险（肌痛、肌炎、横纹肌溶解）。

   风险增加：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   • 横纹肌溶解风险增加 2-3 倍
   • 特别是在高剂量辛伐他汀时（>20mg）

   管理建议：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   ⚠️ 建议调整辛伐他汀剂量至 20mg 以下
   💪 如出现肌肉疼痛、无力，立即就医
   🩺 定期监测肌酸激酶（CK）水平
   💡 考虑换用不经此途径代谢的他汀（如瑞舒伐他汀）

   数据来源：Clinical Pharmacology
   ━━━━━━━━━━━━━━━━━━━━━━━━━━

🟠 相对禁忌（1个）
━━━━━━━━━━━━━━━━━━━━━━━━━━

3. 华法林 + 富含维生素K的食物
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   严重程度：🟠 相对禁忌 (C类)
   风险等级：3/5

   问题描述：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   饮食记录显示您近期经常食用菠菜、西兰花等富含维生素K的食物，
   可能降低华法林的抗凝效果。

   饮食分析：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   • 近7天食用菠菜：3次
   • 近7天食用西兰花：2次
   • 维生素K摄入：中等偏高

   管理建议：
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   🥗 保持维生素K摄入量稳定，避免剧烈波动
   🩺 如计划大幅改变饮食习惯，需告知医生
   📊 定期监测 INR 值
   💡 咨询营养师制定均衡饮食计划

   ━━━━━━━━━━━━━━━━━━━━━━━━━━

总结和建议：
━━━━━━━━━━━━━━━━━━━━━━━━━━
🆘 发现 1 个绝对禁忌，建议尽快咨询医生
🔴 发现 1 个禁忌，需要调整用药方案
🟠 发现 1 个相对禁忌，需要注意饮食管理

行动建议：
━━━━━━━━━━━━━━━━━━━━━━━━━━
🏥 尽快就诊：与开药医生讨论华法林+阿司匹林的合用问题
💊 用药调整：考虑降低辛伐他汀剂量或换用其他他汀
🥗 饮食管理：保持绿色蔬菜摄入量稳定
📅 定期监测：凝血功能、肌酸激酶

━━━━━━━━━━━━━━━━━━━━━━━━━━
本次检查结果已保存，可使用 /interaction history 查看
⚠️ 重要：此检查仅供参考，不能替代医生的专业判断
```

#### 5. 保存检查记录

**文件路径格式：**
`data/interactions/interaction-logs/YYYY-MM/YYYY-MM-DD.json`

**JSON 数据结构：**
```json
{
  "date": "2025-12-31",
  "check_time": "2025-12-31T12:34:56.789Z",
  "medications_count": 4,
  "medications": [
    {
      "id": "med_xxx",
      "name": "华法林",
      "dosage": "5mg",
      "frequency": "每天1次"
    }
  ],
  "interactions_detected": {
    "total": 3,
    "by_severity": {
      "X": 1,
      "D": 1,
      "C": 1,
      "B": 0,
      "A": 0
    }
  },
  "interactions": [
    {
      "type": "drug_drug",
      "severity": "X",
      "drugs": ["华法林", "阿司匹林"],
      "risk_description": "显著增加出血风险"
    }
  ],
  "recommendations": [
    "尽快就诊：与医生讨论华法林+阿司匹林的合用问题",
    "用药调整：考虑降低辛伐他汀剂量"
  ],
  "created_at": "2025-12-31T12:34:56.789Z"
}
```

### 列出相互作用规则 (list)

#### 1. 读取规则数据库

从 `data/interactions/interaction-db.json` 读取所有规则。

#### 2. 输出统计信息

**基本输出格式：**
```
📚 药物相互作用规则库

版本：1.0.0 | 最后更新：2025-12-31
━━━━━━━━━━━━━━━━━━━━━━━━━━

统计信息：
━━━━━━━━━━━━━━━━━━━━━━━━━━
总规则数：80 条
🟢 A类（安全）：10 条
🟡 B类（谨慎）：15 条
🟠 C类（相对禁忌）：30 条
🔴 D类（禁忌）：20 条
🆘 X类（绝对禁忌）：5 条

按类型分布：
━━━━━━━━━━━━━━━━━━━━━━━━━━
药物-药物相互作用：50 条
药物-疾病相互作用：15 条
药物剂量冲突：8 条
药物-食物相互作用：7 条

🆘 绝对禁忌规则（X类）：
━━━━━━━━━━━━━━━━━━━━━━━━━━

1. MAO抑制剂 + SSRIs
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   风险：5-羟色胺综合征（危及生命）
   机制：血清素过度蓄积

2. 硝酸甘油 + 西地那非
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   风险：严重低血压
   机制：协同血管扩张

3. 华法林 + 阿司匹林
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   风险：严重出血
   机制：增强抗凝作用

... (共5条)

━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 使用 /interaction list [级别] 查看特定级别的规则
💡 使用 /interaction list [药物名] 查看特定药物的规则
```

#### 3. 筛选输出

**按严重程度筛选：**
```
/interaction list X

🆘 绝对禁忌规则（X类）：
━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 华法林 + 阿司匹林
   风险：严重出血
   建议：避免合用

2. MAO抑制剂 + SSRIs
   风险：5-羟色胺综合征
   建议：严格禁止

...
```

**按药物名称筛选：**
```
/interaction list 华法林

📋 华法林相关相互作用规则
━━━━━━━━━━━━━━━━━━━━━━━━━━

🆘 绝对禁忌（1个）
• 华法林 + 阿司匹林 - 严重出血风险

🔴 禁忌（2个）
• 华法林 + NSAIDs - 增加出血风险
• 华法林 + 大蒜精油 - 可能增强抗凝作用

🟠 相对禁忌（2个）
• 华法林 + 富含维生素K食物 - 降低抗凝效果
• 华法林 + 圣约翰草 - 降低抗凝效果

🟡 谨慎使用（1个）
• 华法林 + 某些抗生素 - 可能增强抗凝作用
```

### 添加相互作用规则 (add)

#### 1. 解析规则信息

从自然语言中提取：
- 药物1名称
- 药物2名称
- 严重程度（A/B/C/D/X）
- 风险描述

#### 2. 验证输入

- 检查严重程度是否有效
- 检查规则是否已存在
- 验证药物名称格式

#### 3. 创建规则记录

**JSON 数据结构：**
```json
{
  "id": "int_20251231123456789",
  "type": "drug_drug",
  "drugs": [
    {
      "name": "药物1",
      "category": "类别"
    },
    {
      "name": "药物2",
      "category": "类别"
    }
  ],
  "severity": {
    "level": "X",
    "level_name": "绝对禁忌",
    "level_code": 5,
    "color": "🆘"
  },
  "interaction_details": {
    "mechanism": "作用机制",
    "effect": "风险描述",
    "clinical_impact": "临床影响"
  },
  "recommendations": [
    "建议1",
    "建议2"
  ],
  "active": true,
  "is_custom": true,
  "created_at": "2025-12-31T12:34:56.789Z"
}
```

#### 4. 保存到数据库

将新规则添加到 `data/interactions/interaction-db.json`

#### 5. 更新统计信息

更新数据库中的 `statistics` 字段

#### 6. 输出确认

```
✅ 相互作用规则已添加

药物1 + 药物2
━━━━━━━━━━━━━━━━━━━━━━━━━━
严重程度：🆘 绝对禁忌 (X类)
风险描述：显著增加出血风险

数据已保存至：data/interactions/interaction-db.json
```

### 更新相互作用规则 (update)

#### 1. 查找规则

根据药物名称查找已有规则

#### 2. 验证规则存在

检查规则是否存在，以及是否为自定义规则

#### 3. 识别更新字段

支持的字段：
- `severity`: 严重程度
- `recommendations`: 建议
- `notes`: 备注

#### 4. 更新规则记录

更新指定字段的值

#### 5. 输出确认

```
✅ 相互作用规则已更新

药物1 + 药物2
━━━━━━━━━━━━━━━━━━━━━━━━━━
更新字段：severity
原值：D类（禁忌）
新值：C类（相对禁忌）

更新时间：2025-12-31 12:34
```

### 删除相互作用规则 (delete)

#### 1. 查找规则

根据药物名称查找规则

#### 2. 验证可删除性

- 预设规则（`is_custom: false`）不能删除，只能禁用
- 自定义规则（`is_custom: true`）可以删除

#### 3. 显示确认信息

```
⚠️ 确认删除

即将删除相互作用规则：
━━━━━━━━━━━━━━━━━━━━━━━━━━
药物1 + 药物2
严重程度：X类（绝对禁忌）

删除后无法恢复，是否确认？

A. 确认删除
B. 取消
```

#### 4. 执行删除

用户确认后删除记录，更新统计数据

#### 5. 输出确认

```
✅ 相互作用规则已删除

药物1 + 药物2
删除时间：2025-12-31 12:34
```

### 查看检查历史 (history)

#### 1. 读取历史记录

从 `data/interactions/interaction-history.json` 读取历史汇总

#### 2. 输出历史列表

**输出格式：**
```
📋 相互作用检查历史

━━━━━━━━━━━━━━━━━━━━━━━━━━
2025年12月 (共3次检查)
━━━━━━━━━━━━━━━━━━━━━━━━━━

12-31 12:34  |  🚨 发现3个相互作用
           |  • 1个绝对禁忌（华法林+阿司匹林）
           |  • 1个禁忌（辛伐他汀+氨氯地平）
           |  • 1个相对禁忌（华法林+维生素K）

12-25 09:15  |  ✅ 无相互作用
           |  当时用药：2种

12-18 14:20  |  ⚠️ 发现1个相互作用
           |  • 1个相对禁忌（二甲双胍+酒精）

━━━━━━━━━━━━━━━━━━━━━━━━━━
总计：3次检查 | 平均风险等级：🔴 高

趋势分析：
━━━━━━━━━━━━━━━━━━━━━━━━━━
📈 用药数量增加：2种 → 4种
📊 相互作用风险：增加
💡 建议：由于新增药物，建议咨询医生进行用药评估

━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 使用 /interaction check [日期] 查看某次检查的详细结果
```

## 五级严重程度分级标准

| 级别 | 名称 | 代码 | 色标 | 定义 | 处理建议 |
|------|------|------|------|------|----------|
| **A** | 安全 | 1 | 🟢 | 无显著相互作用，可合用 | 无需特别措施 |
| **B** | 谨慎使用 | 2 | 🟡 | 存在相互作用但风险较低 | 注意观察，无需调整 |
| **C** | 相对禁忌 | 3 | 🟠 | 存在有临床意义的相互作用 | 权衡获益风险，考虑替代方案 |
| **D** | 禁忌 | 4 | 🔴 | 相互作用严重，风险大于获益 | 避免合用，特殊情况需监测 |
| **X** | 绝对禁忌 | 5 | 🆘 | 危及生命的相互作用 | 严格禁止合用 |

### 各级判定标准

#### A类 - 安全 (🟢)
- **定义**: 无显著药物相互作用
- **临床意义**: 合用不会导致不良反应或疗效改变
- **处理**: 无需任何特殊措施
- **示例**: 维生素C + 复合维生素B

#### B类 - 谨慎使用 (🟡)
- **定义**: 存在轻微相互作用，但临床风险较低
- **临床意义**: 可能需要剂量调整或时间安排，但通常可安全合用
- **处理**: 定期监测相关指标，注意观察不良反应
- **示例**: 某些抗生素 + 口服避孕药（可能降低避孕效果）

#### C类 - 相对禁忌 (🟠)
- **定义**: 存在有临床意义的相互作用
- **临床意义**: 可能导致不良反应增加或疗效降低
- **处理**: 仔细评估获益与风险，考虑替代药物
- **示例**: NSAIDs + ACEI/ARB（可能降低降压效果）

#### D类 - 禁忌 (🔴)
- **定义**: 严重相互作用，风险明显大于获益
- **临床意义**: 可能导致严重不良反应或治疗失败
- **处理**: 一般情况下避免合用，如必须合用需专科医生批准并严密监测
- **示例**: 阿司匹林 + 华法林（显著增加出血风险）

#### X类 - 绝对禁忌 (🆘)
- **定义**: 危及生命的相互作用
- **临床意义**: 合用可能导致致命后果
- **处理**: 严格禁止合用
- **示例**: MAO抑制剂 + SSRIs（5-羟色胺综合征）

## 与其他命令的集成

### 与 medication 命令的集成

**位置**: medication.md 命令的 `add` 操作

**集成点**: 在第3步"检查药物过敏"之后，添加第4步"检查药物相互作用"

**检查流程**:
1. 读取当前用药列表
2. 执行相互作用检测
3. 按严重程度排序并显示警示
4. 用户选择继续添加/取消添加

**集成示例**:
```markdown
#### 4. 检查药物相互作用 (新增)

在保存药物信息之前，检查与当前用药的相互作用。

**检查步骤**:

1. **加载当前用药**: 从 `data/medications/medications.json` 读取所有活跃药物
2. **执行相互作用检测**: 调用四种检测逻辑
3. **汇总结果**: 生成相互作用报告
4. **显示警示**: 按严重程度分级显示

**输出格式**:
```
🔍 药物相互作用检查

检测到 2 条潜在相互作用：

━━━━━━━━━━━━━━━━━━━━━━━━━━
🆘 绝对禁忌 (X类)
• 华法林 + 阿司匹林
  风险：显著增加出血风险
  建议：避免合用，在医生监测下使用

是否继续添加该药物？
A. 我已了解风险，继续添加（需医生确认）
B. 取消添加，咨询医生
```
```

### 与 diet 命令的集成

从 `/diet` 命令的饮食记录中获取数据，用于药物-食物相互作用检测

### 与 profile 命令的集成

从用户档案中获取疾病史、年龄、肾功能等信息，用于药物-疾病冲突和剂量调整检测

## 数据结构更新

在全局索引 `data/index.json` 中添加：

```json
{
  "interaction_db": "data/interactions/interaction-db.json",
  "interaction_logs": "data/interactions/interaction-logs",
  "statistics": {
    "last_check": null,
    "last_check_date": null,
    "total_checks": 0
  }
}
```

## 注意事项

1. **医疗免责声明**: 所有检查结果仅供参考，不能替代专业医疗建议
2. **数据准确性**: 预设数据库需定期更新和维护
3. **用户体验**: 警示信息要清晰但不造成过度恐慌
4. **隐私保护**: 所有数据仅保存在本地，不上传云端
5. **定期检查**: 建议每月进行一次相互作用检查，特别是在添加新药物后

## 示例用法

```
# 检查当前用药的相互作用
/interaction check

# 检查特定药物的相互作用
/interaction check 华法林 阿司匹林

# 列出所有相互作用规则
/interaction list

# 列出绝对禁忌规则
/interaction list X

# 添加自定义相互作用规则
/interaction add 阿司匹林 华法林 X 显著增加出血风险

# 更新规则
/interaction update 阿司匹林 华法林 severity D

# 删除自定义规则
/interaction delete 阿司匹林 华法林

# 查看检查历史
/interaction history
```

## 错误处理

- **无用药记录**: "暂无用药记录，请先使用 /medication add 添加药物"
- **规则不存在**: "未找到该相互作用规则"
- **严重程度无效**: "严重程度必须是 A、B、C、D 或 X"
- **不能删除预设规则**: "预设规则不能删除，如需调整请使用 update 命令"
- **数据库未初始化**: "相互作用数据库未初始化，正在创建..."
