# /report 命令使用说明

## 快速开始

### 最简单的用法

```
/report comprehensive
```

这将生成一个包含所有可用数据的综合健康报告，保存在 `reports/health-report-YYYY-MM-DD.html`。

## 命令格式

```
/report <action> [date_range] [sections] [output]
```

## 参数说明

### action (必需)

报告类型：
- `comprehensive` - 综合报告（包含所有章节）
- `biochemical` - 生化趋势分析
- `imaging` - 影像检查汇总
- `medication` - 用药分析
- `custom` - 自定义报告

### date_range (可选)

时间范围：
- `all` - 所有数据（默认）
- `last_month` - 上个月
- `last_quarter` - 上季度
- `last_year` - 去年
- `YYYY-MM-DD,YYYY-MM-DD` - 自定义范围
- `YYYY-MM-DD` - 从某日期至今

### sections (可选)

包含的章节（逗号分隔，仅用于custom类型）：
- `profile` - 患者概况
- `biochemical` - 生化检查
- `imaging` - 影像检查
- `medication` - 用药分析
- `radiation` - 辐射剂量
- `allergies` - 过敏摘要
- `symptoms` - 症状历史
- `surgeries` - 手术记录
- `discharge` - 出院小结

### output (可选)

输出文件名（默认：health-report-YYYY-MM-DD.html）

## 使用示例

### 1. 生成综合报告

```
/report comprehensive
```

### 2. 生成最近季度的报告

```
/report comprehensive last_quarter
```

### 3. 生成去年的报告

```
/report comprehensive last_year
```

### 4. 生成自定义时间范围的报告

```
/report custom 2024-01-01,2024-12-31
```

### 5. 生成包含特定章节的报告

```
/report custom 2024-01-01,2024-12-31 biochemical,medication,radiation
```

### 6. 生成生化趋势分析

```
/report biochemical last_year
```

### 7. 指定输出文件名

```
/report comprehensive all all my-health-report.html
```

## 执行流程

当您运行 `/report` 命令时，系统会：

1. **解析参数** - 理解您想要的报告类型和时间范围
2. **收集数据** - 从各个数据文件中读取相关数据
3. **分析数据** - 计算趋势、统计和健康评分
4. **生成洞察** - 识别关键发现和建议
5. **渲染HTML** - 生成包含图表的可视化报告
6. **保存文件** - 将报告保存到指定位置
7. **显示确认** - 显示报告位置和基本信息

## 报告内容

生成的HTML报告包含：

### 标题区域
- 报告名称
- 生成时间
- 数据时间范围

### 患者概况
- 年龄
- 身高、体重
- BMI、体表面积

### 执行摘要
- **健康评分**（0-100分）及等级
- **关键发现** - 需要关注的事项
- **核心指标** - 重要统计数据

### 数据章节（根据您的数据）
- 生化检查分析（趋势图、异常指标）
- 影像检查汇总（类型分布、部位分布）
- 用药分析（依从性统计）
- 辐射剂量追踪（累积剂量、月度趋势）
- 过敏摘要
- 症状历史
- 手术记录
- 出院小结

### 免责声明
- 仅供参考说明
- 隐私保护声明

## 报告特点

✅ **专业可视化** - 使用Chart.js生成交互式图表
✅ **响应式设计** - 支持电脑、平板、手机
✅ **打印优化** - 优化的打印布局
✅ **独立文件** - 单个HTML文件，易于分享
✅ **数据隐私** - 所有数据处理都在本地完成

## 查看报告

生成报告后，您可以：

1. **在浏览器中打开** - 双击HTML文件即可查看
2. **打印为PDF** - 在浏览器中使用打印功能，选择"保存为PDF"
3. **分享给医生** - 通过邮件或其他方式发送HTML文件
4. **存档备份** - 保存到云盘或其他存储位置

## 注意事项

⚠️ **数据隐私**
- 报告包含您的个人健康信息
- 分享时请注意隐私保护
- 建议不要公开分享

⚠️ **医疗建议**
- 报告仅供参考，不作为诊断依据
- 所有诊疗决策需咨询专业医生
- 如有紧急情况，请立即就医

⚠️ **数据准确性**
- 报告基于您记录的数据生成
- 请确保数据录入准确
- 定期更新您的健康数据

## 故障排除

### 问题1：提示"暂无数据"

**原因**: 指定的时间范围内没有相关数据

**解决**:
- 检查数据是否已录入
- 尝试使用 `all` 作为时间范围
- 确认数据文件存在于 `data/` 目录

### 问题2：报告生成失败

**原因**:
- 数据文件格式错误
- 缺少必要的数据字段
- 文件权限问题

**解决**:
- 检查数据文件格式是否正确
- 确保有读取权限
- 查看错误信息并修复相关问题

### 问题3：图表不显示

**原因**: 网络连接问题，无法加载CDN资源

**解决**:
- 检查网络连接
- 确保可以访问以下CDN：
  - cdn.tailwindcss.com
  - cdn.jsdelivr.net
  - unpkg.com

## 高级用法

### 定期生成报告

建议定期生成健康报告，例如：
- 每月生成一次月度报告
- 每季度生成一次综合报告
- 每年生成一次年度健康总结

### 对比报告

生成不同时间段的报告，对比健康变化：
```
# 生成第一季度的报告
/report comprehensive 2024-01-01,2024-03-31 all all q1-report.html

# 生成第二季度的报告
/report comprehensive 2024-04-01,2024-06-30 all all q2-report.html
```

### 专项报告

关注特定方面的健康：
```
# 关注用药情况
/report medication last_month

# 关注生化指标趋势
/report biochemical last_quarter
```

## 相关命令

- `/profile` - 设置患者基本信息
- `/save-report` - 保存检查单
- `/medication` - 管理用药记录
- `/query` - 查询医疗记录
- `/consult` - 多学科专家会诊
